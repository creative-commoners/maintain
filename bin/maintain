#!/usr/bin/env php
<?php

require realpath(__DIR__ . '/../vendor/autoload.php');

use SilverStripe\Maintain\Command\SyncLabels;
use SilverStripe\Maintain\Filter\SupportedModuleFilter;
use SilverStripe\Maintain\Loader\SupportedModuleLoader;
use SilverStripe\Maintain\Loader\TemplateLoader;
use Symfony\Component\Console\Application;

// Provide a base dir constant for referencing relative file paths
define('MAINTAIN_BASE_DIR', dirname(__DIR__));

$application = new Application();

// Dependencies
$moduleLoader = SupportedModuleLoader::instance()
    ->setFilter(new SupportedModuleFilter());
$templateLoader = TemplateLoader::instance();

// Command registration
$application->add(new SyncLabels($moduleLoader, $templateLoader));

$application->run();
